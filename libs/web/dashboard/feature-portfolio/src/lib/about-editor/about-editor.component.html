<div class="about-editor">
  @if (loading) {
    <div class="loading">
      <p>Loading about information...</p>
    </div>
  }

  @if (error) {
    <div class="error">
      <p class="error-message">{{ error }}</p>
      <button (click)="loadAbout()" class="retry-button">Retry</button>
    </div>
  }

  @if (about && !loading) {
    <form [formGroup]="aboutForm" (ngSubmit)="saveAbout()" class="about-form">
    <div class="form-section">
      <h3>Personal Information</h3>

      <div class="form-row">
        <label for="name-ar">Name (Arabic)*</label>
        <input
          id="name-ar"
          type="text"
          formControlName="name"
          placeholder="Enter name in Arabic"
        />
      </div>

      <div class="form-row">
        <label for="name-en">Name (English)</label>
        <input
          id="name-en"
          type="text"
          formControlName="nameEn"
          placeholder="Enter name in English"
        />
      </div>

      <div class="form-row">
        <label for="title-ar">Professional Title (Arabic)*</label>
        <input
          id="title-ar"
          type="text"
          formControlName="title"
          placeholder="Enter professional title in Arabic"
        />
      </div>

      <div class="form-row">
        <label for="title-en">Professional Title (English)</label>
        <input
          id="title-en"
          type="text"
          formControlName="titleEn"
          placeholder="Enter professional title in English"
        />
      </div>

      <div class="form-row">
        <label for="email">Email*</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          placeholder="Enter email address"
        />
      </div>

      <div class="form-row">
        <label for="avatar">Avatar URL</label>
        <input
          id="avatar"
          type="url"
          formControlName="avatar"
          placeholder="Enter avatar image URL"
        />
      </div>
    </div>

    <div class="form-section">
      <h3>Bio</h3>

      <div class="form-row">
        <label for="bio-ar">Bio (Arabic)*</label>
        <textarea
          id="bio-ar"
          formControlName="bio"
          rows="6"
          placeholder="Enter bio in Arabic"
        ></textarea>
      </div>

      <div class="form-row">
        <label for="bio-en">Bio (English)</label>
        <textarea
          id="bio-en"
          formControlName="bioEn"
          rows="6"
          placeholder="Enter bio in English"
        ></textarea>
      </div>
    </div>

    <div class="form-section">
      <h3>Social Links</h3>

      @for (linkGroup of socialLinks(); track $index; let i = $index) {
        <div formGroupName="socialLinks" class="social-link-row">
          <div class="form-row">
            <label [for]="'platform-' + i">Platform</label>
            <input
              [id]="'platform-' + i"
                type="text"
                formControlName="platform"
                placeholder="e.g., github, linkedin"
            />
          </div>

          <div class="form-row">
            <label [for]="'url-' + i">URL</label>
            <input
              [id]="'url-' + i"
                type="url"
                formControlName="url"
                placeholder="https://..."
            />
          </div>

          <div class="form-row">
            <label [for]="'order-' + i">Order</label>
            <input
              [id]="'order-' + i"
                type="number"
                formControlName="displayOrder"
                min="0"
            />
          </div>

          <button type="button" (click)="removeSocialLink(i)" class="remove-link-button">
            Remove
          </button>
        </div>
      }

      <button type="button" (click)="addSocialLink()" class="add-link-button">
        + Add Social Link
      </button>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="saving || aboutForm.invalid" class="save-button">
        @if (!saving) {
          <span>Save Changes</span>
        }
        @if (saving) {
          <span>Saving...</span>
        }
      </button>
    </div>
    </form>
  }
</div>
